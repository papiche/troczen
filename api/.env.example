# TrocZen API Backend - Configuration
# ============================================
# Configuration complète pour TrocZen Box avec modules ORACLE et DRAGON
# ============================================

# ============================================
# TROCZEN BOX CONFIGURATION
# ============================================
# Ces paramètres permettent de configurer une TrocZen Box autonome
# avec une market_seed prédéfinie pour le déploiement sur Raspberry Pi

# Market Seed (64 caractères hex)
# Génère automatiquement les QR codes WiFi et Market sur la page d'accueil
# Laisser vide pour mode "démonstration" sans QR codes
# Pour HACKATHON (marché public): utiliser 64 zéros
MARKET_SEED=0000000000000000000000000000000000000000000000000000000000000000

# Nom du marché (affiché sur la page d'accueil)
MARKET_NAME=HACKATHON

# Configuration WiFi de la TrocZen Box
# Le mot de passe est dérivé de MARKET_SEED via SHA256(seed + "wifi_password")
WIFI_SSID=TrocZen-ORIGIN
WIFI_PASSWORD=0penS0urce!

# IP locale de la Box (par défaut Raspberry Pi hotspot)
BOX_IP=10.42.0.1

# ============================================
# IPFS Configuration
# ============================================
IPFS_API_URL=http://127.0.0.1:5001
IPFS_GATEWAY=https://ipfs.copylaradio.com
IPFS_ENABLED=true
IPFS_TIMEOUT=30

# ============================================
# NOSTR CONFIGURATION
# ============================================
# URL du relai Nostr local (Strfry)
NOSTR_RELAY=ws://127.0.0.1:7777
NOSTR_ENABLED=true

# Pagination Nostr
NOSTR_PAGE_SIZE=500
NOSTR_MAX_RESULTS=10000

# ============================================
# ORACLE CONFIGURATION (WoTx2 - Verifiable Credentials)
# ============================================
# Clé privée de l'Oracle pour signer les credentials (Kind 30503)
#  IMPORTANT: Générer une clé sécurisée en production!
# Pour générer: python -c "import secrets; print(secrets.token_hex(32))"
ORACLE_NSEC_HEX=your_oracle_private_key_hex_here_64_chars

# Pubkey de l'Oracle (dérivée de la nsec, ou définie manuellement)
ORACLE_PUBKEY=your_oracle_public_key_hex_here_64_chars

# Seuils d'attestation par défaut
ORACLE_OFFICIAL_THRESHOLD=2    # Permits officiels: N+1 attestations
ORACLE_WOTX2_THRESHOLD=1       # WoTx2 auto-proclamés: 1 attestation

# Durée de validité des credentials (jours)
CREDENTIAL_VALIDITY_SKILL=365      # Compétences: 1 an
CREDENTIAL_VALIDITY_LICENSE=1825   # Licences: 5 ans
CREDENTIAL_VALIDITY_AUTHORITY=3650 # Autorités: 10 ans

# ============================================
# DRAGON CONFIGURATION (Capitaine - Calcul dynamique)
# ============================================
# Paramètres C² (vitesse de création monétaire)
C2_MIN=0.02       # C² minimum (2%)
C2_MAX=0.25       # C² maximum (25%)
C2_DEFAULT=0.07   # C² par défaut (7%)

# Paramètres alpha (multiplicateur compétence)
ALPHA_MIN=0.0
ALPHA_MAX=1.0
ALPHA_DEFAULT=0.3

# Paramètres TTL (durée de vie des bons)
TTL_MIN_DAYS=7
TTL_MAX_DAYS=365
TTL_DEFAULT_DAYS=28

# DU (Dividende Universel)
DU_INITIAL=10.0    # 10 Zen/jour - constante fondamentale
MIN_N1_FOR_DU=5    # Seuil minimum N1 pour DU actif

# Fenêtre d'analyse (jours)
ANALYSIS_WINDOW=30

# ============================================
# PAF (Participation Aux Frais)
# ============================================
# Coût mensuel de l'infrastructure (EUR)
MONTHLY_SERVER_COST=42

# Taux de change Zen/EUR (fixe, mais partiel)
ZEN_EUR_RATE=1   # 1 Zen = 1 EUR

# ============================================
# GITHUB FEEDBACK CONFIGURATION
# ============================================
#  IMPORTANT: Créer un Personal Access Token avec scope 'public_repo'
# https://github.com/settings/tokens/new
GITHUB_TOKEN=ghp_your_github_personal_access_token_here
GITHUB_REPO=copylaradio/troczen

# ============================================
# SERVER CONFIGURATION
# ============================================
FLASK_ENV=development
FLASK_DEBUG=True
HOST=0.0.0.0
PORT=5000

# ============================================
# SECURITY
# ============================================
MAX_FILE_SIZE=5242880  # 5MB in bytes
ALLOWED_EXTENSIONS=png,jpg,jpeg,webp,gif

# ============================================
# LOGGING
# ============================================
LOG_LEVEL=INFO
LOG_FILE=/var/log/troczen/api.log

# ============================================
# DEVELOPMENT / TESTING
# ============================================
# Mode test (désactive certaines vérifications)
TEST_MODE=false

# Mock signatures (pour développement sans nostr-protocol)
MOCK_SIGNATURES=true
